<!DOCTYPE html>
<html lang='en'>
  <!-- Hello dear source reader, feel free to wander around. -->
  <head>
    <!-- I really think you should use https -->
    <script>
      var host = "www.timfelgentreff.de";
      if ((host == window.location.host) && (window.location.protocol != "https:")) window.location.protocol = "https";
    </script>
    <!-- I *love* UTF-8 -->
    <meta charset='utf-8'>
    <meta content='width=device-width,initial-scale=1.0' name='viewport'>
    <title>Thin on JRuby - www.timfelgentreff.de</title>
    <script src='/articles.js?Njc1NDBkOQ==' type='text/javascript'></script>
    <script src='/blog.js?Njc1NDBkOQ==' type='text/javascript'></script>
    <link href='//fonts.googleapis.com/css?family=Fanwood+Text' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro' rel='stylesheet' type='text/css'>
    <link href='/blog.css?Njc1NDBkOQ==' rel='stylesheet' type='text/css'>
    <link href='https://www.timfelgentreff.de' rel='canonical'>
    <link href='//upload.wikimedia.org/wikipedia/commons/a/a8/Cesium.svg' rel='icon' type='image/jpeg'>
    <link href='http://feeds.feedburner.com/blogbithugorg' rel='alternate' title='https://www.timfelgentreff.de' type='application/rss+xml'>
  </head>
  <body class='hyphenate'>
    <!-- IE 9 supports CSS3/HTML5, or at least that's what I'm told. -->
    <!--[if lt IE 9]>
      <script src='http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js' type='text/javascript'></script>
      <div id='prompt'></div>
      <script>
        window.attachEvent("onload", function() { CFInstall.check({ mode: "inline", node: "prompt" })});
      </script>
    <![endif]-->
    <div class='blog'>
      <div class='header'>
        Coding and stuff
        <!-- .subtitle Because, because, because of the wonderful things he does -->
        <nav>
          <a class='link' href='/cv.html' title='CV'>CV</a>
        </nav>
      </div>
      <nav>
        <a class='link first' href='/2010/06/jax.html' title='Git talk @ JaX 2010'>&lt;&lt;</a>
        <a class='link prev' href='/2010/07/capi-the-thin-gem-and-not-much-to-show.html' title='JRuby commit flag'>&lt;</a>
        <a class='link next' href='/2010/08/benchmarking-rdiscount.html' title='Benchmarking RDiscount'>&gt;</a>
        <a class='link last' href='/2015/09/phd.html' title='PhD Thesis Progress'>&gt;&gt;</a>
      </nav>
      <article data-source='/2010/07/thin-on-jruby.html'>
        <header>
          <h1 property='dc:title' xmlns:dc='http://purl.org/dc/elements/1.1/'>Thin on JRuby</h1>
          <div class='author'>
            by
            <a href='mailto:timfelgentreff@gmail.com' property='cc:attributionName' xmlns:cc='http://creativecommons.org/ns#'>Tim Felgentreff</a>
            ,
            <time class='timeago' datetime='2010-07-13T00:00:00+00:00' pubdate>2010/07/13, 00:00 UTC</time>
          </div>
        </header>
        <section class='content'>
          
          <p>After much work from Wayne Meissner and myself I have managed to get the Thin webserver running on JRuby. It actually loaded for a couple of weeks or so already, but only recently stopped crashing when receiving a request. Today I have managed to get it to serve pages as well, so I guess it’s time for some speed checking :)</p>
          
          <p>The tests are just quickly done using ab and were run on REE 2010.02, JRuby Head on the cext branch and Rubinius 1.0.0-20100514. I did 1000 requests at different concurrency levels and checked the average req/s.</p>
          
          <h2 id="the_numbers">The numbers</h2>
          <table cellspacing='10' width='75%'>
          <thead>
          <td>concurrency</td>
          <td>REE</td>
          <td>JRuby</td>
          <td>Rubinius</td>
          </thead>
          <tr><td>1</td><td>3102</td><td>298</td><td>214</td></tr>
          <tr><td>11</td><td>3563</td><td>521</td><td>544</td></tr>
          <tr><td>21</td><td>4836</td><td>584</td><td>754</td></tr>
          <tr><td>31</td><td>3402</td><td>668</td><td>728</td></tr>
          <tr><td>41</td><td>5056</td><td>686</td><td>486</td></tr>
          <tr><td>51</td><td>4025</td><td>672</td><td>797</td></tr>
          <tr><td>61</td><td>5427</td><td>1046</td><td>704</td></tr>
          <tr><td>71</td><td>3874</td><td>1080</td><td>736</td></tr>
          <tr><td>81</td><td>5249</td><td>947</td><td>685</td></tr>
          <tr><td>91</td><td>3919</td><td>678</td><td>579</td></tr>
          </table>
          <p><br /></p>
          
          <p>As we can see, JRuby starts something like 15x slower than REE and only recovers to about 4 times slower with a concurrency of 71. It is generally faster than Rubinius, though. This is not a fair comparison, though, as JRuby has a Java implementation of EventMachine.</p>
          
          <p>Apart from that, overall coverage of the C API specs is getting better, too. Currently out of the 348 examples, 26 fail and 110 throw errors. Failures are mostly incomplete implementations of Ruby functions, errors are almost exclusively missing functions.</p>
        </section>
        <br>
        <section class='license'>
          <a rel="cc:attributionURL" href="http://github.com/rkh/rkh.im">This work</a> is licensed under a
          <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/de/deed.en">Creative Commons
          Attribution-ShareAlike 3.0 Germany License</a>. Any source code included is, unless stated otherwise,
          licensed under a <a rel="licenses" href="http://creativecommons.org/licenses/MIT/">MIT License</a>.
          <span class='noprint'>This does not apply for comments (below).</span>
        </section>
        <section class='comments'>
          <!-- I both love and hate disqus -->
        </section>
      </article>
      <aside>
        <p>
          <a href='//feeds.feedburner.com/blogbithugorg' rel='alternate' title='Subscribe to my feed' type='application/rss+xml'>
            <img alt='Subscribe to my feed' src='/public/images/feed-icon.png' width='32px'>
          </a>
        </p>
        <a href='/cv.html' title='CV'>
          <img src='//www.gravatar.com/avatar/36fee2e65c9c0ed678fe3b7d862ed271?s=180'>
        </a>
        
        <p>I received a doctoral degree at the <a href="http://www.hpi.de/swa">Software Architecture Group</a> of the <a href="http://www.hpi.de/">Hasso Plattner Institute</a> at the <a href="http://www.uni-potsdam.de/">University Of Potsdam</a>.</p>
        
        <p>I am now working on programming language and VM related things at Oracle Labs.</p>
        
        <p>You can follow me on <a href="http://twitter.com/timfelgentreff">Twitter</a>. Most of the code I’m talking about is on <a href="http://github.com/timfel">GitHub</a>. I also have a <a href="/cv.html">CV</a>, although I am lazy about updating it.</p>
        <h3>Posts</h3>
        <article>
          <div class='date'>2015/09/25</div>
          <a href='/2015/09/phd.html'>PhD Thesis Progress</a>
        </article>
        <article>
          <div class='date'>2015/04/10</div>
          <a href='/2015/04/rsqueak.html'>RSqueak/VM - A research VM for Squeak/Smalltalk</a>
        </article>
        <article>
          <div class='date'>2012/08/27</div>
          <a href='/2012/08/qoppa.html'>Qoppa - a language to learn about Fexpr's</a>
        </article>
        <article>
          <div class='date'>2012/05/31</div>
          <a href='/2012/05/thesis.html'>Master Thesis Progress</a>
        </article>
        <article>
          <div class='date'>2012/02/22</div>
          <a href='/2012/02/cloud-foundry-squeak.html'>CloudFoundry for Smalltalk applications</a>
        </article>
        <article>
          <div class='date'>2011/09/08</div>
          <a href='/2011/09/maglev-debug.html'>Debugging on steroids - what Ruby should learn from Smalltalk</a>
        </article>
        <article>
          <div class='date'>2010/11/28</div>
          <a href='/2010/11/powersaving-on-macbook.html'>Linux PM on Macbook Pro</a>
        </article>
        <article>
          <div class='date'>2010/11/10</div>
          <a href='/2010/11/rsoc.html'>Ruby Summer of Code Wrap-Up</a>
        </article>
        <article>
          <div class='date'>2010/10/23</div>
          <a href='/2010/10/redcar-syntax-checks.html'>Syntax Checking For Redcar</a>
        </article>
        <article>
          <div class='date'>2010/09/26</div>
          <a href='/2010/09/redcar-debug.html'>A Redcar debugger interface</a>
        </article>
        <article>
          <div class='date'>2010/08/14</div>
          <a href='/2010/08/benchmarking-rdiscount.html'>Benchmarking RDiscount</a>
        </article>
        <article>
          <div class='date'>2010/07/13</div>
          <a href='/2010/07/thin-on-jruby.html'>Thin on JRuby</a>
        </article>
        <article>
          <div class='date'>2010/07/09</div>
          <a href='/2010/07/capi-the-thin-gem-and-not-much-to-show.html'>JRuby commit flag</a>
        </article>
        <article>
          <div class='date'>2010/06/18</div>
          <a href='/2010/06/first-week-of-rubysoc.html'>First week of RubySOC</a>
        </article>
        <article>
          <div class='date'>2010/06/07</div>
          <a href='/2010/06/jax.html'>Git talk @ JaX 2010</a>
        </article>
      </aside>
    </div>
  </body>
</html>
